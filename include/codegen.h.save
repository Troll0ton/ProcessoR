curr_cmdEF(HLT, "hlt",
{
    stack_push (&Cpu->Stk, STOP);
})

curr_cmdEF(PUSH, "push",
{
    stack_push (&Cpu->Stk, arg_d);
    ip++;
})

curr_cmdEF(POP, "pop",
{
    if((int) Cpu->code[ip] & MASK_RAM && (int) Cpu->code[ip] & MASK_REG)
    {
        Cpu->ram[Cpu->regs[(int) Cpu->code[ip + 1]]] = stack_pop (&Cpu->Stk);
    }

    else if((int) Cpu->code[ip] & MASK_REG)
    {
        Cpu->regs[(int) Cpu->code[ip + 1]] = stack_pop (&Cpu->Stk);
    }

    else if((int) Cpu->code[ip] & MASK_RAM)
    {
        Cpu->ram[(int) Cpu->code[ip + 1]]  = stack_pop (&Cpu->Stk);
    }

    else
    {
        stack_pop (&Cpu->Stk);
        ip--;
    }

    ip++;
})

curr_cmdEF(ADD, "add",
{
    stack_push (&Cpu->Stk, stack_pop (&Cpu->Stk) + stack_pop (&Cpu->Stk));
})

curr_cmdEF(SUB, "sub",
{
    stack_push (&Cpu->Stk, -(stack_pop (&Cpu->Stk) - stack_pop (&Cpu->Stk)));
})

curr_cmdEF(MUL, "mul",
{
    stack_push (&Cpu->Stk, stack_pop (&Cpu->Stk) * stack_pop (&Cpu->Stk));
})

curr_cmdEF(DIV, "div",
{
    stack_push (&Cpu->Stk, 1 / stack_pop (&Cpu->Stk) * stack_pop (&Cpu->Stk));
})

curr_cmdEF(OUT, "out",
{
    printf ("result: %lg\n", stack_pop (&Cpu->Stk));
})

curr_cmdEF(DUMP, "dump",
{
    stack_dumps (&Cpu->Stk, Cpu->Info.file_out);
})

curr_cmdEF(JBE, "jbe",
{
    f2 = stack_pop (&Cpu->Stk);
    first_number = stack_pop (&Cpu->Stk);
    if(first_number <= f2)
    {
        int pos_ch = arg_d;
        ip = pos_ch - 2;
    }
    else ip++;
    stack_push (&Cpu->Stk, first_number);
    stack_push (&Cpu->Stk, f2);
})

curr_cmdEF(JAE, "jae",
{
    f2 = stack_pop (&Cpu->Stk);
    first_number = stack_pop (&Cpu->Stk);
    if(first_number >= f2)
    {
        int pos_ch = arg_d;
        ip = pos_ch - 2;
    }
    else ip++;
    stack_push (&Cpu->Stk, first_number);
    stack_push (&Cpu->Stk, f2);
})

curr_cmdEF(JA, "ja",
{
    f2 = stack_pop (&Cpu->Stk);
    first_number = stack_pop (&Cpu->Stk);
    if(first_number > f2)
    {
        int pos_ch = arg_d;
        ip = pos_ch- 2;
    }
    else ip++;
    stack_push (&Cpu->Stk, first_number);
    stack_push (&Cpu->Stk, f2);
})

curr_cmdEF(JB, "jb",
{
    f2 = stack_pop (&Cpu->Stk);
    first_number = stack_pop (&Cpu->Stk);
    if(first_number < f2)
    {
        int pos_ch = arg_d;
        ip = pos_ch - 2;
    }
    else ip++;
    stack_push (&Cpu->Stk, first_number);
    stack_push (&Cpu->Stk, f2);
})

curr_cmdEF(JE, "je",
{
    f2 = stack_pop (&Cpu->Stk);
    first_number = stack_pop (&Cpu->Stk);
    if(is_equal(first_number,f2))
    {
        int pos_ch = arg_d;
        ip = pos_ch - 2;
    }
    else ip++;
    stack_push (&Cpu->Stk, first_number);
    stack_push (&Cpu->Stk, f2);
})

curr_cmdEF(JNE, "jne",
{
    f2 = stack_pop (&Cpu->Stk);
    first_number = stack_pop (&Cpu->Stk);
    if(!is_equal(first_number,f2))
    {
        int pos_ch = arg_d;
        ip = pos_ch - 2;
    }
    else ip++;
    stack_push (&Cpu->Stk, first_number);
    stack_push (&Cpu->Stk, f2);
})
